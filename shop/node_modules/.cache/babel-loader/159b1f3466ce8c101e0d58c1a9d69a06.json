{"ast":null,"code":"import _slicedToArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Modal,Button,Form}from'react-bootstrap';import{fetchBrand,updateBrand}from'../http/catalogAPI.js';import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateBrand=function UpdateBrand(props){var id=props.id,show=props.show,setShow=props.setShow,setChange=props.setChange;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),valid=_useState4[0],setValid=_useState4[1];useEffect(function(){if(id){fetchBrand(id).then(function(data){return setName(data.name);}).catch(function(error){return alert(error.response.data.message);});}},[id]);var handleChange=function handleChange(event){setName(event.target.value);setValid(event.target.value.trim()!=='');};var handleSubmit=function handleSubmit(event){event.preventDefault();/*\n         * На первый взгляд кажется, что переменная correct не нужна, можно обойтись valid, но это\n         * не так. Нельзя использовать значение valid сразу после изменения этого значения — ф-ция\n         * setValid не изменяет значение состояния мгновенно. Вызов функции лишь означает — React\n         * «принял к сведению» наше сообщение, что состояние нужно изменить.\n         */var correct=name.trim()!=='';setValid(correct);if(correct){var data={name:name.trim()};updateBrand(id,data).then(function(data){// закрываем модальное окно редактирования бренда\nsetShow(false);// изменяем состояние, чтобы обновить список брендов\nsetChange(function(state){return!state;});}).catch(function(error){return alert(error.response.data.message);});}};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:function onHide(){return setShow(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0431\\u0440\\u0435\\u043D\\u0434\\u0430\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Control,{name:\"name\",value:name,onChange:function onChange(e){return handleChange(e);},isValid:valid===true,isInvalid:valid===false,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0431\\u0440\\u0435\\u043D\\u0434\\u0430...\",className:\"mb-3\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})})]});};export default UpdateBrand;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/components/UpdateBrand.js"],"names":["Modal","Button","Form","fetchBrand","updateBrand","useState","useEffect","UpdateBrand","props","id","show","setShow","setChange","name","setName","valid","setValid","then","data","catch","error","alert","response","message","handleChange","event","target","value","trim","handleSubmit","preventDefault","correct","state","e"],"mappings":"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","sourcesContent":["import { Modal, Button, Form } from 'react-bootstrap'\nimport { fetchBrand, updateBrand } from '../http/catalogAPI.js'\nimport { useState, useEffect } from 'react'\n\nconst UpdateBrand = (props) => {\n    const { id, show, setShow, setChange } = props\n\n    const [name, setName] = useState('')\n    const [valid, setValid] = useState(null)\n\n    useEffect(() => {\n        if(id) {\n            fetchBrand(id)\n                .then(\n                    data => setName(data.name)\n                )\n                .catch(\n                    error => alert(error.response.data.message)\n                )\n        }\n    }, [id])\n\n    const handleChange = (event) => {\n        setName(event.target.value)\n        setValid(event.target.value.trim() !== '')\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        /*\n         * На первый взгляд кажется, что переменная correct не нужна, можно обойтись valid, но это\n         * не так. Нельзя использовать значение valid сразу после изменения этого значения — ф-ция\n         * setValid не изменяет значение состояния мгновенно. Вызов функции лишь означает — React\n         * «принял к сведению» наше сообщение, что состояние нужно изменить.\n         */\n        const correct = name.trim() !== ''\n        setValid(correct)\n        if (correct) {\n            const data = {\n                name: name.trim()\n            }\n            updateBrand(id, data)\n                .then(\n                    data => {\n                        // закрываем модальное окно редактирования бренда\n                        setShow(false)\n                        // изменяем состояние, чтобы обновить список брендов\n                        setChange(state => !state)\n                    }\n                )\n                .catch(\n                    error => alert(error.response.data.message)\n                )\n        }\n    }\n\n    return (\n        <Modal show={show} onHide={() => setShow(false)}>\n            <Modal.Header closeButton>\n                <Modal.Title>Редактирование бренда</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body>\n                <Form noValidate onSubmit={handleSubmit}>\n                    <Form.Control\n                        name=\"name\"\n                        value={name}\n                        onChange={e => handleChange(e)}\n                        isValid={valid === true}\n                        isInvalid={valid === false}\n                        placeholder=\"Название бренда...\"\n                        className=\"mb-3\"\n                    />\n                    <Button type=\"submit\">Сохранить</Button>\n                </Form>\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default UpdateBrand"]},"metadata":{},"sourceType":"module"}