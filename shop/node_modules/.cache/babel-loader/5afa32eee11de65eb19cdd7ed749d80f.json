{"ast":null,"code":"import _slicedToArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{fetchBrands,deleteBrand}from'../http/catalogAPI.js';import{Button,Container,Spinner,Table}from'react-bootstrap';import CreateBrand from'../components/CreateBrand.js';import UpdateBrand from'../components/UpdateBrand.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminBrands=function AdminBrands(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),brands=_useState2[0],setBrands=_useState2[1];// список загруженных брендов\nvar _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),fetching=_useState4[0],setFetching=_useState4[1];// загрузка списка брендов с сервера\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),createShow=_useState6[0],setCreateShow=_useState6[1];// модальное окно создания бренда\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),updateShow=_useState8[0],setUpdateShow=_useState8[1];// модальное окно редактирования\n// для обновления списка после добавления, редактирования, удаления — изменяем состояние\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),change=_useState10[0],setChange=_useState10[1];// id бренда, который будем редактировать — для передачи в <UpdateBrand id={…} />\nvar _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),brand=_useState12[0],setBrand=_useState12[1];var handleUpdateClick=function handleUpdateClick(id){setBrand(id);setUpdateShow(true);};var handleDeleteClick=function handleDeleteClick(id){deleteBrand(id).then(function(data){setChange(!change);alert(\"\\u0411\\u0440\\u0435\\u043D\\u0434 \\xAB\".concat(data.name,\"\\xBB \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\"));}).catch(function(error){return alert(error.response.data.message);});};useEffect(function(){fetchBrands().then(function(data){return setBrands(data);}).finally(function(){return setFetching(false);});},[change]);if(fetching){return/*#__PURE__*/_jsx(Spinner,{animation:\"border\"});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\\u044B\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setCreateShow(true);},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0431\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsx(CreateBrand,{show:createShow,setShow:setCreateShow,setChange:setChange}),/*#__PURE__*/_jsx(UpdateBrand,{id:brand,show:updateShow,setShow:setUpdateShow,setChange:setChange}),brands.length>0?/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,size:\"sm\",className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:brands.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"success\",size:\"sm\",onClick:function onClick(){return handleUpdateClick(item.id);},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:function onClick(){return handleDeleteClick(item.id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})})]},item.id);})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0431\\u0440\\u0435\\u043D\\u0434\\u043E\\u0432 \\u043F\\u0443\\u0441\\u0442\\u043E\\u0439\"})]});};export default AdminBrands;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/pages/AdminBrands.js"],"names":["useState","useEffect","fetchBrands","deleteBrand","Button","Container","Spinner","Table","CreateBrand","UpdateBrand","AdminBrands","brands","setBrands","fetching","setFetching","createShow","setCreateShow","updateShow","setUpdateShow","change","setChange","brand","setBrand","handleUpdateClick","id","handleDeleteClick","then","data","alert","name","catch","error","response","message","finally","length","map","item"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { fetchBrands, deleteBrand } from '../http/catalogAPI.js'\nimport { Button, Container, Spinner, Table } from 'react-bootstrap'\nimport CreateBrand from '../components/CreateBrand.js'\nimport UpdateBrand from '../components/UpdateBrand.js'\n\nconst AdminBrands = () => {\n    const [brands, setBrands] = useState(null) // список загруженных брендов\n    const [fetching, setFetching] = useState(true) // загрузка списка брендов с сервера\n    const [createShow, setCreateShow] = useState(false) // модальное окно создания бренда\n    const [updateShow, setUpdateShow] = useState(false) // модальное окно редактирования\n    // для обновления списка после добавления, редактирования, удаления — изменяем состояние\n    const [change, setChange] = useState(false)\n    // id бренда, который будем редактировать — для передачи в <UpdateBrand id={…} />\n    const [brand, setBrand] = useState(null)\n\n    const handleUpdateClick = (id) => {\n        setBrand(id)\n        setUpdateShow(true)\n    }\n\n    const handleDeleteClick = (id) => {\n        deleteBrand(id)\n            .then(\n                data => {\n                    setChange(!change)\n                    alert(`Бренд «${data.name}» удален`)\n                }\n            )\n            .catch(\n                error => alert(error.response.data.message)\n            )\n    }\n\n    useEffect(() => {\n        fetchBrands()\n            .then(\n                data => setBrands(data)\n            )\n            .finally(\n                () => setFetching(false)\n            )\n    }, [change])\n\n    if (fetching) {\n        return <Spinner animation=\"border\" />\n    }\n\n    return (\n        <Container>\n            <h1>Бренды</h1>\n            <Button onClick={() => setCreateShow(true)}>Создать бренд</Button>\n            <CreateBrand show={createShow} setShow={setCreateShow} setChange={setChange} />\n            <UpdateBrand id={brand} show={updateShow} setShow={setUpdateShow} setChange={setChange} />\n            {brands.length > 0 ? (\n                <Table bordered hover size=\"sm\" className=\"mt-3\">\n                <thead>\n                    <tr>\n                        <th>Название</th>\n                        <th>Редактировать</th>\n                        <th>Удалить</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {brands.map(item => \n                        <tr key={item.id}>\n                            <td>{item.name}</td>\n                            <td>\n                                <Button variant=\"success\" size=\"sm\" onClick={() => handleUpdateClick(item.id)}>\n                                    Редактировать\n                                </Button>\n                            </td>\n                            <td>\n                                <Button variant=\"danger\" size=\"sm\" onClick={() => handleDeleteClick(item.id)}>\n                                    Удалить\n                                </Button>\n                            </td>\n                        </tr>\n                    )}\n                </tbody>\n                </Table>\n            ) : (\n                <p>Список брендов пустой</p>\n            )}\n        </Container>\n    )\n}\n\nexport default AdminBrands"]},"metadata":{},"sourceType":"module"}