{"ast":null,"code":"import _slicedToArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AppContext}from'./AppContext.js';import{check}from'../http/userAPI.js';import{useContext,useEffect,useState}from'react';import{Spinner}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";var CheckAuth=function CheckAuth(props){var _useContext=useContext(AppContext),user=_useContext.user;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),checking=_useState2[0],setChecking=_useState2[1];useEffect(function(){check().then(function(data){if(data){user.login(data);}}).finally(function(){return setChecking(false);});},[]);if(checking){return/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"light\"});}return props.children;};export default CheckAuth;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/components/CheckAuth.js"],"names":["AppContext","check","useContext","useEffect","useState","Spinner","CheckAuth","props","user","checking","setChecking","then","data","login","finally","children"],"mappings":"mIAAA,OAASA,UAAT,KAA2B,iBAA3B,CACA,OAASC,KAAT,KAAsB,oBAAtB,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,QAAhC,KAAgD,OAAhD,CACA,OAASC,OAAT,KAAwB,iBAAxB,C,2CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CACzB,gBAAiBL,UAAU,CAACF,UAAD,CAA3B,CAAQQ,IAAR,aAAQA,IAAR,CACA,cAAgCJ,QAAQ,CAAC,IAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eAEAP,SAAS,CAAC,UAAM,CACZF,KAAK,GACAU,IADL,CACU,SAAAC,IAAI,CAAI,CACV,GAAIA,IAAJ,CAAU,CACNJ,IAAI,CAACK,KAAL,CAAWD,IAAX,EACH,CACJ,CALL,EAMKE,OANL,CAOQ,iBAAMJ,CAAAA,WAAW,CAAC,KAAD,CAAjB,EAPR,EASH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAID,QAAJ,CAAc,CACV,mBAAO,KAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,OAAO,CAAC,OAApC,EAAP,CACH,CAED,MAAOF,CAAAA,KAAK,CAACQ,QAAb,CACH,CArBD,CAuBA,cAAeT,CAAAA,SAAf","sourcesContent":["import { AppContext } from './AppContext.js'\nimport { check } from '../http/userAPI.js'\nimport { useContext, useEffect, useState } from 'react'\nimport { Spinner } from 'react-bootstrap'\n\nconst CheckAuth = (props) => {\n    const { user } = useContext(AppContext)\n    const [checking, setChecking] = useState(true)\n    \n    useEffect(() => {\n        check()\n            .then(data => {\n                if (data) {\n                    user.login(data)\n                }\n            })\n            .finally(\n                () => setChecking(false)\n            )\n    }, [])\n\n    if (checking) {\n        return <Spinner animation=\"border\" variant=\"light\" />\n    }\n\n    return props.children\n}\n\nexport default CheckAuth"]},"metadata":{},"sourceType":"module"}