{"ast":null,"code":"import _slicedToArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Modal,Button,Form}from'react-bootstrap';import{createBrand}from'../http/catalogAPI.js';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateBrand=function CreateBrand(props){var show=props.show,setShow=props.setShow,setChange=props.setChange;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),valid=_useState4[0],setValid=_useState4[1];var handleChange=function handleChange(event){setName(event.target.value);setValid(event.target.value.trim()!=='');};var handleSubmit=function handleSubmit(event){event.preventDefault();/*\n         * На первый взгляд кажется, что переменная correct не нужна, можно обойтись valid, но это\n         * не так. Нельзя использовать значение valid сразу после изменения этого значения — ф-ция\n         * setValid не изменяет значение состояния мгновенно. Вызов функции лишь означает — React\n         * «принял к сведению» наше сообщение, что состояние нужно изменить.\n         */var correct=name.trim()!=='';setValid(correct);if(correct){var data={name:name.trim()};createBrand(data).then(function(data){// готовим форму к созданию еще одного бренда\nsetName('');setValid(null);// закрываем модальное окно создания бренда\nsetShow(false);// изменяем состояние компонента списка брендов\nsetChange(function(state){return!state;});}).catch(function(error){return alert(error.response.data.message);});}};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:function onHide(){return setShow(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0431\\u0440\\u0435\\u043D\\u0434\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Control,{name:\"name\",value:name,onChange:function onChange(e){return handleChange(e);},isValid:valid===true,isInvalid:valid===false,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0431\\u0440\\u0435\\u043D\\u0434\\u0430...\",className:\"mb-3\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})})]});};export default CreateBrand;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/components/CreateBrand.js"],"names":["Modal","Button","Form","createBrand","useState","CreateBrand","props","show","setShow","setChange","name","setName","valid","setValid","handleChange","event","target","value","trim","handleSubmit","preventDefault","correct","data","then","state","catch","error","alert","response","message","e"],"mappings":"mIAAA,OAASA,KAAT,CAAgBC,MAAhB,CAAwBC,IAAxB,KAAoC,iBAApC,CACA,OAASC,WAAT,KAA4B,uBAA5B,CACA,OAASC,QAAT,KAAyB,OAAzB,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3B,GAAQC,CAAAA,IAAR,CAAqCD,KAArC,CAAQC,IAAR,CAAcC,OAAd,CAAqCF,KAArC,CAAcE,OAAd,CAAuBC,SAAvB,CAAqCH,KAArC,CAAuBG,SAAvB,CAEA,cAAwBL,QAAQ,CAAC,EAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,eAA0BP,QAAQ,CAAC,IAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC5BJ,OAAO,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP,CACAJ,QAAQ,CAACE,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,KAA8B,EAA/B,CAAR,CACH,CAHD,CAKA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,KAAD,CAAW,CAC5BA,KAAK,CAACK,cAAN,GACA;AACR;AACA;AACA;AACA;AACA,WACQ,GAAMC,CAAAA,OAAO,CAAGX,IAAI,CAACQ,IAAL,KAAgB,EAAhC,CACAL,QAAQ,CAACQ,OAAD,CAAR,CACA,GAAIA,OAAJ,CAAa,CACT,GAAMC,CAAAA,IAAI,CAAG,CACTZ,IAAI,CAAEA,IAAI,CAACQ,IAAL,EADG,CAAb,CAGAf,WAAW,CAACmB,IAAD,CAAX,CACKC,IADL,CAEQ,SAAAD,IAAI,CAAI,CACJ;AACAX,OAAO,CAAC,EAAD,CAAP,CACAE,QAAQ,CAAC,IAAD,CAAR,CACA;AACAL,OAAO,CAAC,KAAD,CAAP,CACA;AACAC,SAAS,CAAC,SAAAe,KAAK,QAAI,CAACA,KAAL,EAAN,CAAT,CACH,CAVT,EAYKC,KAZL,CAaQ,SAAAC,KAAK,QAAIC,CAAAA,KAAK,CAACD,KAAK,CAACE,QAAN,CAAeN,IAAf,CAAoBO,OAArB,CAAT,EAbb,EAeH,CACJ,CA9BD,CAgCA,mBACI,MAAC,KAAD,EAAO,IAAI,CAAEtB,IAAb,CAAmB,MAAM,CAAE,wBAAMC,CAAAA,OAAO,CAAC,KAAD,CAAb,EAA3B,wBACI,KAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,uBACI,KAAC,KAAD,CAAO,KAAP,4EADJ,EADJ,cAKI,KAAC,KAAD,CAAO,IAAP,wBACI,MAAC,IAAD,EAAM,UAAU,KAAhB,CAAiB,QAAQ,CAAEW,YAA3B,wBACI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAET,IAFX,CAGI,QAAQ,CAAE,kBAAAoB,CAAC,QAAIhB,CAAAA,YAAY,CAACgB,CAAD,CAAhB,EAHf,CAII,OAAO,CAAElB,KAAK,GAAK,IAJvB,CAKI,SAAS,CAAEA,KAAK,GAAK,KALzB,CAMI,WAAW,CAAC,0FANhB,CAOI,SAAS,CAAC,MAPd,EADJ,cAUI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,oEAVJ,GADJ,EALJ,GADJ,CAsBH,CAjED,CAmEA,cAAeP,CAAAA,WAAf","sourcesContent":["import { Modal, Button, Form } from 'react-bootstrap'\nimport { createBrand } from '../http/catalogAPI.js'\nimport { useState } from 'react'\n\nconst CreateBrand = (props) => {\n    const { show, setShow, setChange } = props\n\n    const [name, setName] = useState('')\n    const [valid, setValid] = useState(null)\n\n    const handleChange = (event) => {\n        setName(event.target.value)\n        setValid(event.target.value.trim() !== '')\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        /*\n         * На первый взгляд кажется, что переменная correct не нужна, можно обойтись valid, но это\n         * не так. Нельзя использовать значение valid сразу после изменения этого значения — ф-ция\n         * setValid не изменяет значение состояния мгновенно. Вызов функции лишь означает — React\n         * «принял к сведению» наше сообщение, что состояние нужно изменить.\n         */\n        const correct = name.trim() !== ''\n        setValid(correct)\n        if (correct) {\n            const data = {\n                name: name.trim()\n            }\n            createBrand(data)\n                .then(\n                    data => {\n                        // готовим форму к созданию еще одного бренда\n                        setName('')\n                        setValid(null)\n                        // закрываем модальное окно создания бренда\n                        setShow(false)\n                        // изменяем состояние компонента списка брендов\n                        setChange(state => !state)\n                    }\n                )\n                .catch(\n                    error => alert(error.response.data.message)\n                )\n        }\n    }\n\n    return (\n        <Modal show={show} onHide={() => setShow(false)}>\n            <Modal.Header closeButton>\n                <Modal.Title>Новый бренд</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body>\n                <Form noValidate onSubmit={handleSubmit}>\n                    <Form.Control\n                        name=\"name\"\n                        value={name}\n                        onChange={e => handleChange(e)}\n                        isValid={valid === true}\n                        isInvalid={valid === false}\n                        placeholder=\"Название бренда...\"\n                        className=\"mb-3\"\n                    />\n                    <Button type=\"submit\">Сохранить</Button>\n                </Form>\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default CreateBrand"]},"metadata":{},"sourceType":"module"}