{"ast":null,"code":"import _defineProperty from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{useEffect,useState}from'react';import{Row,Col,Button,Form}from'react-bootstrap';import{createProperty,updateProperty,deleteProperty}from'../http/catalogAPI.js';import uuid from'react-uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UpdateProperties=function UpdateProperties(props){var properties=props.properties,setProperties=props.setProperties;var append=function append(){setProperties([].concat(_toConsumableArray(properties),[{id:null,name:'',value:'',unique:uuid(),append:true}]));};var remove=function remove(unique){// новую хар-ку надо просто удалить из массива properties, а старую — оставить, но\n// изменить remove на true, чтобы потом выполнить http-запрос на сервер для удаления\nvar item=properties.find(function(elem){return elem.unique===unique;});if(item.id){// старая хар-ка\nsetProperties(properties.map(function(elem){return elem.unique===unique?_objectSpread(_objectSpread({},elem),{},{change:false,remove:true}):elem;}));}else{// новая хар-ка\nsetProperties(properties.filter(function(elem){return elem.unique===unique;}));}};var change=function change(key,value,unique){setProperties(properties.map(function(item){var _objectSpread2;return item.unique===unique?_objectSpread(_objectSpread({},item),{},(_objectSpread2={},_defineProperty(_objectSpread2,key,value),_defineProperty(_objectSpread2,\"change\",!item.append),_objectSpread2)):item;}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"}),/*#__PURE__*/_jsx(Button,{onClick:append,variant:\"outline-primary\",size:\"sm\",className:\"mb-2\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),properties.map(function(item){return/*#__PURE__*/_jsxs(Row,{className:\"mb-2\",style:{display:item.remove?'none':'flex'},children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{name:'name_'+item.unique,value:item.name,onChange:function onChange(e){return change('name',e.target.value,item.unique);},placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435...\",size:\"sm\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{name:'value_'+item.unique,value:item.value,onChange:function onChange(e){return change('value',e.target.value,item.unique);},placeholder:\"\\u0417\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435...\",size:\"sm\"})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return remove(item.unique);},size:\"sm\",variant:\"outline-danger\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),item.change&&' *']})]},item.unique);})]});};export default UpdateProperties;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/components/UpdateProperties.js"],"names":["useEffect","useState","Row","Col","Button","Form","createProperty","updateProperty","deleteProperty","uuid","UpdateProperties","props","properties","setProperties","append","id","name","value","unique","remove","item","find","elem","map","change","filter","key","display","e","target"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport { Row, Col, Button, Form } from 'react-bootstrap'\nimport { createProperty, updateProperty, deleteProperty } from '../http/catalogAPI.js'\nimport uuid from 'react-uuid'\n\nconst UpdateProperties = (props) => {\n    const { properties, setProperties } = props\n\n    const append = () => {\n        setProperties([...properties, {id: null, name: '', value: '', unique: uuid(), append: true}])\n    }\n    const remove = (unique) => {\n        // новую хар-ку надо просто удалить из массива properties, а старую — оставить, но\n        // изменить remove на true, чтобы потом выполнить http-запрос на сервер для удаления\n        const item = properties.find(elem => elem.unique === unique)\n        if (item.id) { // старая хар-ка\n            setProperties(properties.map(\n                elem => elem.unique === unique ? {...elem, change: false, remove: true} : elem\n            ))\n        } else { // новая хар-ка\n            setProperties(properties.filter(elem => elem.unique === unique))\n        }\n    }\n    const change = (key, value, unique) => {\n        setProperties(properties.map(\n            item => item.unique === unique ? {...item, [key]: value, change: !item.append} : item\n        ))\n    }\n\n    return (\n        <>\n            <h5>Характеристики</h5>\n            <Button onClick={append} variant=\"outline-primary\" size=\"sm\" className=\"mb-2\">\n                Добавить\n            </Button>\n            {properties.map(item =>\n                <Row key={item.unique} className=\"mb-2\" style={{display: item.remove ? 'none': 'flex'}}>\n                    <Col>\n                        <Form.Control\n                            name={'name_' + item.unique}\n                            value={item.name}\n                            onChange={e => change('name', e.target.value, item.unique)}\n                            placeholder=\"Название...\"\n                            size=\"sm\"\n                        />\n                    </Col>\n                    <Col>\n                        <Form.Control\n                            name={'value_' + item.unique}\n                            value={item.value}\n                            onChange={e => change('value', e.target.value, item.unique)}\n                            placeholder=\"Значение...\"\n                            size=\"sm\"\n                        />\n                    </Col>\n                    <Col>\n                        <Button onClick={() => remove(item.unique)} size=\"sm\" variant=\"outline-danger\">\n                            Удалить\n                        </Button>\n                        {item.change && ' *'}\n                    </Col>\n                </Row>\n            )}\n        </>\n    )\n}\n\nexport default UpdateProperties"]},"metadata":{},"sourceType":"module"}