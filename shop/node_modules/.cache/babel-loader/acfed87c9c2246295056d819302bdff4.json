{"ast":null,"code":"import _asyncToGenerator from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/regenerator/index.js\";import{AppContext}from'../components/AppContext.js';import{useContext,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{Container,Card,Form,Button}from'react-bootstrap';import{login}from'../http/userAPI.js';import{observer}from'mobx-react-lite';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=observer(function(){var _useContext=useContext(AppContext),user=_useContext.user;var navigate=useNavigate();// если пользователь авторизован — ему здесь делать нечего\nuseEffect(function(){if(user.isAdmin)navigate('/admin',{replace:true});if(user.isAuth)navigate('/user',{replace:true});},[]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var email,password,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();email=event.target.email.value.trim();password=event.target.password.value.trim();_context.next=5;return login(email,password);case 5:data=_context.sent;if(data){user.login(data);if(user.isAdmin)navigate('/admin');if(user.isAuth)navigate('/user');}case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Card,{style:{width:'50%'},className:\"p-2 mt-5 bg-light\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"m-auto\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-column\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Control,{name:\"email\",className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 email...\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"password\",className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-3 pl-3 pr-3\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0442\\u0435\\u0441\\u044C!\"})]})]})]})]})});});export default Login;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/pages/Login.js"],"names":["AppContext","useContext","useEffect","Link","useNavigate","Container","Card","Form","Button","login","observer","Login","user","navigate","isAdmin","replace","isAuth","handleSubmit","event","preventDefault","email","target","value","trim","password","data","width"],"mappings":"yQAAA,OAASA,UAAT,KAA2B,6BAA3B,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,OAAtC,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,SAAT,CAAoBC,IAApB,CAA0BC,IAA1B,CAAgCC,MAAhC,KAA8C,iBAA9C,CACA,OAASC,KAAT,KAAsB,oBAAtB,CACA,OAASC,QAAT,KAAyB,iBAAzB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAGD,QAAQ,CAAC,UAAM,CACzB,gBAAiBT,UAAU,CAACD,UAAD,CAA3B,CAAQY,IAAR,aAAQA,IAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEA;AACAF,SAAS,CAAC,UAAM,CACZ,GAAIU,IAAI,CAACE,OAAT,CAAkBD,QAAQ,CAAC,QAAD,CAAW,CAACE,OAAO,CAAE,IAAV,CAAX,CAAR,CAClB,GAAIH,IAAI,CAACI,MAAT,CAAiBH,QAAQ,CAAC,OAAD,CAAU,CAACE,OAAO,CAAE,IAAV,CAAV,CAAR,CACpB,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAME,CAAAA,YAAY,0FAAG,iBAAOC,KAAP,0IACjBA,KAAK,CAACC,cAAN,GACMC,KAFW,CAEHF,KAAK,CAACG,MAAN,CAAaD,KAAb,CAAmBE,KAAnB,CAAyBC,IAAzB,EAFG,CAGXC,QAHW,CAGAN,KAAK,CAACG,MAAN,CAAaG,QAAb,CAAsBF,KAAtB,CAA4BC,IAA5B,EAHA,uBAIEd,CAAAA,KAAK,CAACW,KAAD,CAAQI,QAAR,CAJP,QAIXC,IAJW,eAKjB,GAAIA,IAAJ,CAAU,CACNb,IAAI,CAACH,KAAL,CAAWgB,IAAX,EACA,GAAIb,IAAI,CAACE,OAAT,CAAkBD,QAAQ,CAAC,QAAD,CAAR,CAClB,GAAID,IAAI,CAACI,MAAT,CAAiBH,QAAQ,CAAC,OAAD,CAAR,CACpB,CATgB,sDAAH,kBAAZI,CAAAA,YAAY,4CAAlB,CAYA,mBACI,KAAC,SAAD,EAAW,SAAS,CAAC,+BAArB,uBACI,MAAC,IAAD,EAAM,KAAK,CAAE,CAACS,KAAK,CAAE,KAAR,CAAb,CAA6B,SAAS,CAAC,mBAAvC,wBACI,WAAI,SAAS,CAAC,QAAd,gFADJ,cAEI,MAAC,IAAD,EAAM,SAAS,CAAC,oBAAhB,CAAqC,QAAQ,CAAET,YAA/C,wBACI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,OADT,CAEI,SAAS,CAAC,MAFd,CAGI,WAAW,CAAC,wEAHhB,EADJ,cAMI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,UADT,CAEI,SAAS,CAAC,MAFd,CAGI,WAAW,CAAC,uGAHhB,EANJ,cAWI,aAAK,SAAS,CAAC,+CAAf,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,4CADJ,cAII,yGAEI,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,+GAFJ,GAJJ,GAXJ,GAFJ,GADJ,EADJ,CA4BH,CAlDqB,CAAtB,CAoDA,cAAeN,CAAAA,KAAf","sourcesContent":["import { AppContext } from '../components/AppContext.js'\nimport { useContext, useEffect } from 'react'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { Container, Card, Form, Button } from 'react-bootstrap'\nimport { login } from '../http/userAPI.js'\nimport { observer } from 'mobx-react-lite'\n\nconst Login = observer(() => {\n    const { user } = useContext(AppContext)\n    const navigate = useNavigate()\n\n    // если пользователь авторизован — ему здесь делать нечего\n    useEffect(() => {\n        if (user.isAdmin) navigate('/admin', {replace: true})\n        if (user.isAuth) navigate('/user', {replace: true})\n    }, [])\n\n    const handleSubmit = async (event) => {\n        event.preventDefault()\n        const email = event.target.email.value.trim()\n        const password = event.target.password.value.trim()\n        const data = await login(email, password)\n        if (data) {\n            user.login(data)\n            if (user.isAdmin) navigate('/admin')\n            if (user.isAuth) navigate('/user')\n        }\n    }\n\n    return (\n        <Container className=\"d-flex justify-content-center\">\n            <Card style={{width: '50%'}} className=\"p-2 mt-5 bg-light\">\n                <h3 className=\"m-auto\">Авторизация</h3>\n                <Form className=\"d-flex flex-column\" onSubmit={handleSubmit}>\n                    <Form.Control\n                        name=\"email\"\n                        className=\"mt-3\"\n                        placeholder=\"Введите ваш email...\"\n                    />\n                    <Form.Control\n                        name=\"password\"\n                        className=\"mt-3\"\n                        placeholder=\"Введите ваш пароль...\"\n                    />\n                    <div className=\"d-flex justify-content-between mt-3 pl-3 pr-3\">\n                        <Button type=\"submit\">\n                            Войти\n                        </Button>\n                        <p>\n                            Нет аккаунта?\n                            <Link to=\"/signup\">Зарегистрирутесь!</Link>\n                        </p>\n                    </div>\n                </Form>\n            </Card>\n        </Container>\n    )\n})\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}