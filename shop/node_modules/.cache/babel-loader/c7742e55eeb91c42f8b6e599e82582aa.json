{"ast":null,"code":"var _jsxFileName = \"/var/www/html/check/javascript-shop/client.v1/src/components/UpdateProperties.js\";\nimport { useEffect, useState } from 'react';\nimport { Row, Col, Button, Form } from 'react-bootstrap';\nimport { createProperty, updateProperty, deleteProperty } from '../http/catalogAPI.js';\nimport uuid from 'react-uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UpdateProperties = props => {\n  const {\n    properties,\n    setProperties\n  } = props;\n\n  const append = () => {\n    setProperties([...properties, {\n      id: null,\n      name: '',\n      value: '',\n      unique: uuid(),\n      append: true\n    }]);\n  };\n\n  const remove = unique => {\n    // новую хар-ку надо просто удалить из массива properties, а старую — оставить, но\n    // изменить remove на true, чтобы потом выполнить http-запрос на сервер для удаления\n    const item = properties.find(elem => elem.unique === unique);\n\n    if (item.id) {\n      // старая хар-ка\n      setProperties(properties.map(elem => elem.unique === unique ? { ...elem,\n        change: false,\n        remove: true\n      } : elem));\n    } else {\n      // новая хар-ка\n      setProperties(properties.filter(elem => elem.unique === unique));\n    }\n  };\n\n  const change = (key, value, unique) => {\n    setProperties(properties.map(item => item.unique === unique ? { ...item,\n      [key]: value,\n      change: !item.append\n    } : item));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: append,\n      variant: \"outline-primary\",\n      size: \"sm\",\n      className: \"mb-2\",\n      children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), properties.map(item => /*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-2\",\n      style: {\n        display: item.remove ? 'none' : 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Form.Control, {\n          name: 'name_' + item.unique,\n          value: item.name,\n          onChange: e => change('name', e.target.value, item.unique),\n          placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435...\",\n          size: \"sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Form.Control, {\n          name: 'value_' + item.unique,\n          value: item.value,\n          onChange: e => change('value', e.target.value, item.unique),\n          placeholder: \"\\u0417\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435...\",\n          size: \"sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => remove(item.unique),\n          size: \"sm\",\n          variant: \"outline-danger\",\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this), item.change && ' *']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this)]\n    }, item.unique, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true);\n};\n\n_c = UpdateProperties;\nexport default UpdateProperties;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdateProperties\");","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/components/UpdateProperties.js"],"names":["useEffect","useState","Row","Col","Button","Form","createProperty","updateProperty","deleteProperty","uuid","UpdateProperties","props","properties","setProperties","append","id","name","value","unique","remove","item","find","elem","map","change","filter","key","display","e","target"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport { Row, Col, Button, Form } from 'react-bootstrap'\nimport { createProperty, updateProperty, deleteProperty } from '../http/catalogAPI.js'\nimport uuid from 'react-uuid'\n\nconst UpdateProperties = (props) => {\n    const { properties, setProperties } = props\n\n    const append = () => {\n        setProperties([...properties, {id: null, name: '', value: '', unique: uuid(), append: true}])\n    }\n    const remove = (unique) => {\n        // новую хар-ку надо просто удалить из массива properties, а старую — оставить, но\n        // изменить remove на true, чтобы потом выполнить http-запрос на сервер для удаления\n        const item = properties.find(elem => elem.unique === unique)\n        if (item.id) { // старая хар-ка\n            setProperties(properties.map(\n                elem => elem.unique === unique ? {...elem, change: false, remove: true} : elem\n            ))\n        } else { // новая хар-ка\n            setProperties(properties.filter(elem => elem.unique === unique))\n        }\n    }\n    const change = (key, value, unique) => {\n        setProperties(properties.map(\n            item => item.unique === unique ? {...item, [key]: value, change: !item.append} : item\n        ))\n    }\n\n    return (\n        <>\n            <h5>Характеристики</h5>\n            <Button onClick={append} variant=\"outline-primary\" size=\"sm\" className=\"mb-2\">\n                Добавить\n            </Button>\n            {properties.map(item =>\n                <Row key={item.unique} className=\"mb-2\" style={{display: item.remove ? 'none': 'flex'}}>\n                    <Col>\n                        <Form.Control\n                            name={'name_' + item.unique}\n                            value={item.name}\n                            onChange={e => change('name', e.target.value, item.unique)}\n                            placeholder=\"Название...\"\n                            size=\"sm\"\n                        />\n                    </Col>\n                    <Col>\n                        <Form.Control\n                            name={'value_' + item.unique}\n                            value={item.value}\n                            onChange={e => change('value', e.target.value, item.unique)}\n                            placeholder=\"Значение...\"\n                            size=\"sm\"\n                        />\n                    </Col>\n                    <Col>\n                        <Button onClick={() => remove(item.unique)} size=\"sm\" variant=\"outline-danger\">\n                            Удалить\n                        </Button>\n                        {item.change && ' *'}\n                    </Col>\n                </Row>\n            )}\n        </>\n    )\n}\n\nexport default UpdateProperties"]},"metadata":{},"sourceType":"module"}