{"ast":null,"code":"import _defineProperty from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Modal,Button,Form,Row,Col}from'react-bootstrap';import{createProduct,fetchCategories,fetchBrands}from'../http/catalogAPI.js';import{useState,useEffect}from'react';import CreateProperties from'./CreateProperties.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultValue={name:'',price:'',category:'',brand:''};var defaultValid={name:null,price:null,category:null,brand:null};var isValid=function isValid(value){var result={};var pattern=/^[1-9][0-9]*$/;for(var key in value){if(key==='name')result.name=value.name.trim()!=='';if(key==='price')result.price=pattern.test(value.price.trim());if(key==='category')result.category=pattern.test(value.category);if(key==='brand')result.brand=pattern.test(value.brand);}return result;};var CreateProduct=function CreateProduct(props){var show=props.show,setShow=props.setShow,setChange=props.setChange;var _useState=useState(defaultValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(defaultValid),_useState4=_slicedToArray(_useState3,2),valid=_useState4[0],setValid=_useState4[1];// выбранное для загрузки изображение товара\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];// список характеристик товара\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),properties=_useState8[0],setProperties=_useState8[1];// список категорий и список брендов для возможности выбора\nvar _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),categories=_useState10[0],setCategories=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),brands=_useState12[0],setBrands=_useState12[1];// нужно получить с сервера список категорий и список брендов\nuseEffect(function(){fetchCategories().then(function(data){return setCategories(data);});fetchBrands().then(function(data){return setBrands(data);});},[]);var handleInputChange=function handleInputChange(event){var data=_objectSpread(_objectSpread({},value),{},_defineProperty({},event.target.name,event.target.value));setValue(data);setValid(isValid(data));};var handleImageChange=function handleImageChange(event){setImage(event.target.files[0]);};var handleSubmit=function handleSubmit(event){event.preventDefault();/*\n         * На первый взгляд кажется, что переменная correct не нужна, можно обойтись valid, но это\n         * не так. Нельзя использовать значение valid сразу после изменения этого значения — ф-ция\n         * setValid не изменяет значение состояния мгновенно. Вызов функции лишь означает — React\n         * «принял к сведению» наше сообщение, что состояние нужно изменить.\n         */var correct=isValid(value);setValid(correct);// все поля формы прошли проверку, можно отправлять данные на сервер\nif(correct.name&&correct.price&&correct.category&&correct.brand){var data=new FormData();data.append('name',value.name.trim());data.append('price',value.price.trim());data.append('categoryId',value.category);data.append('brandId',value.brand);if(image)data.append('image',image,image.name);// характеристики нового товара\nif(properties.length){var _props=properties.filter(function(prop){return prop.name.trim()!==''&&prop.value.trim()!=='';});if(_props.length){data.append('props',JSON.stringify(_props));}}createProduct(data).then(function(data){// приводим форму в изначальное состояние\nevent.target.image.value='';setValue(defaultValue);setValid(defaultValid);setProperties([]);// закрываем модальное окно создания товара\nsetShow(false);// изменяем состояние компонента списка товаров\nsetChange(function(state){return!state;});}).catch(function(error){return alert(error.response.data.message);});}};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:function onHide(){return setShow(false);},size:\"lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Control,{name:\"name\",value:value.name,onChange:function onChange(e){return handleInputChange(e);},isValid:valid.name===true,isInvalid:valid.name===false,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430...\",className:\"mb-3\"}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form.Select,{name:\"category\",value:value.category,onChange:function onChange(e){return handleInputChange(e);},isValid:valid.category===true,isInvalid:valid.category===false,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),categories&&categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.name},item.id);})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form.Select,{name:\"brand\",value:value.brand,onChange:function onChange(e){return handleInputChange(e);},isValid:valid.brand===true,isInvalid:valid.brand===false,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"}),brands&&brands.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.name},item.id);})]})})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{name:\"price\",value:value.price,onChange:function onChange(e){return handleInputChange(e);},isValid:valid.price===true,isInvalid:valid.price===false,placeholder:\"\\u0426\\u0435\\u043D\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430...\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{name:\"image\",type:\"file\",onChange:function onChange(e){return handleImageChange(e);},placeholder:\"\\u0424\\u043E\\u0442\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430...\"})})]}),/*#__PURE__*/_jsx(CreateProperties,{properties:properties,setProperties:setProperties}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})})]});};export default CreateProduct;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/components/CreateProduct.js"],"names":["Modal","Button","Form","Row","Col","createProduct","fetchCategories","fetchBrands","useState","useEffect","CreateProperties","defaultValue","name","price","category","brand","defaultValid","isValid","value","result","pattern","key","trim","test","CreateProduct","props","show","setShow","setChange","setValue","valid","setValid","image","setImage","properties","setProperties","categories","setCategories","brands","setBrands","then","data","handleInputChange","event","target","handleImageChange","files","handleSubmit","preventDefault","correct","FormData","append","length","filter","prop","JSON","stringify","state","catch","error","alert","response","message","e","map","item","id"],"mappings":"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","sourcesContent":["import { Modal, Button, Form, Row, Col } from 'react-bootstrap'\nimport { createProduct, fetchCategories, fetchBrands } from '../http/catalogAPI.js'\nimport { useState, useEffect } from 'react'\nimport CreateProperties from './CreateProperties.js'\n\nconst defaultValue = {name: '', price: '', category: '', brand: ''}\nconst defaultValid = {name: null, price: null, category: null, brand: null}\n\nconst isValid = (value) => {\n    const result = {}\n    const pattern = /^[1-9][0-9]*$/\n    for (let key in value) {\n        if (key === 'name') result.name = value.name.trim() !== ''\n        if (key === 'price') result.price = pattern.test(value.price.trim())\n        if (key === 'category') result.category = pattern.test(value.category)\n        if (key === 'brand') result.brand = pattern.test(value.brand)\n    }\n    return result\n}\n\nconst CreateProduct = (props) => {\n    const { show, setShow, setChange } = props\n\n    const [value, setValue] = useState(defaultValue)\n    const [valid, setValid] = useState(defaultValid)\n\n    // выбранное для загрузки изображение товара\n    const [image, setImage] = useState(null)\n\n    // список характеристик товара\n    const [properties, setProperties] = useState([])\n\n    // список категорий и список брендов для возможности выбора\n    const [categories, setCategories] = useState(null)\n    const [brands, setBrands] = useState(null)\n\n    // нужно получить с сервера список категорий и список брендов\n    useEffect(() => {\n        fetchCategories()\n            .then(\n                data => setCategories(data)\n            )\n        fetchBrands()\n            .then(\n                data => setBrands(data)\n            )\n    }, [])\n\n    const handleInputChange = (event) => {\n        const data = {...value, [event.target.name]: event.target.value}\n        setValue(data)\n        setValid(isValid(data))\n    }\n\n    const handleImageChange = (event) => {\n        setImage(event.target.files[0])\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n\n        /*\n         * На первый взгляд кажется, что переменная correct не нужна, можно обойтись valid, но это\n         * не так. Нельзя использовать значение valid сразу после изменения этого значения — ф-ция\n         * setValid не изменяет значение состояния мгновенно. Вызов функции лишь означает — React\n         * «принял к сведению» наше сообщение, что состояние нужно изменить.\n         */\n        const correct = isValid(value)\n        setValid(correct)\n\n        // все поля формы прошли проверку, можно отправлять данные на сервер\n        if (correct.name && correct.price && correct.category && correct.brand) {\n\n            const data = new FormData()\n            data.append('name', value.name.trim())\n            data.append('price', value.price.trim())\n            data.append('categoryId', value.category)\n            data.append('brandId', value.brand)\n            if (image) data.append('image', image, image.name)\n            // характеристики нового товара\n            if (properties.length) {\n                const props = properties.filter(\n                    prop => prop.name.trim() !== '' && prop.value.trim() !== ''\n                )\n                if (props.length) {\n                    data.append('props', JSON.stringify(props))\n                }\n            }\n\n            createProduct(data)\n                .then(\n                    data => {\n                        // приводим форму в изначальное состояние\n                        event.target.image.value = ''\n                        setValue(defaultValue)\n                        setValid(defaultValid)\n                        setProperties([])\n                        // закрываем модальное окно создания товара\n                        setShow(false)\n                        // изменяем состояние компонента списка товаров\n                        setChange(state => !state)\n                    }\n                )\n                .catch(\n                    error => alert(error.response.data.message)\n                )\n        }\n    }\n\n    return (\n        <Modal show={show} onHide={() => setShow(false)} size=\"lg\">\n            <Modal.Header closeButton>\n                <Modal.Title>Новый товар</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body>\n                <Form noValidate onSubmit={handleSubmit}>\n                    <Form.Control\n                        name=\"name\"\n                        value={value.name}\n                        onChange={e => handleInputChange(e)}\n                        isValid={valid.name === true}\n                        isInvalid={valid.name === false}\n                        placeholder=\"Название товара...\"\n                        className=\"mb-3\"\n                    />\n                    <Row className=\"mb-3\">\n                        <Col>\n                            <Form.Select\n                                name=\"category\"\n                                value={value.category}\n                                onChange={e => handleInputChange(e)}\n                                isValid={valid.category === true}\n                                isInvalid={valid.category === false}\n                            >\n                                <option value=\"\">Категория</option>\n                                {categories && categories.map(item =>\n                                    <option key={item.id} value={item.id}>{item.name}</option>\n                                )}\n                            </Form.Select>\n                        </Col>\n                        <Col>\n                            <Form.Select\n                                name=\"brand\"\n                                value={value.brand}\n                                onChange={e => handleInputChange(e)}\n                                isValid={valid.brand === true}\n                                isInvalid={valid.brand === false}\n                            >\n                                <option value=\"\">Бренд</option>\n                                {brands && brands.map(item =>\n                                    <option key={item.id} value={item.id}>{item.name}</option>\n                                )}\n                            </Form.Select>\n                        </Col>\n                    </Row>\n                    <Row className=\"mb-3\">\n                        <Col>\n                            <Form.Control\n                                name=\"price\"\n                                value={value.price}\n                                onChange={e => handleInputChange(e)}\n                                isValid={valid.price === true}\n                                isInvalid={valid.price === false}\n                                placeholder=\"Цена товара...\"\n                            />\n                        </Col>\n                        <Col>\n                            <Form.Control\n                                name=\"image\"\n                                type=\"file\"\n                                onChange={e => handleImageChange(e)}\n                                placeholder=\"Фото товара...\"\n                            />\n                        </Col>\n                    </Row>\n                    <CreateProperties properties={properties} setProperties={setProperties} />\n                    <Row>\n                        <Col>\n                            <Button type=\"submit\">Сохранить</Button>\n                        </Col>\n                    </Row>\n                </Form>\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default CreateProduct"]},"metadata":{},"sourceType":"module"}