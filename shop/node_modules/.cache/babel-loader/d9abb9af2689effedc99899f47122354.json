{"ast":null,"code":"import _slicedToArray from\"/var/www/html/check/javascript-shop/client.v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Container,Row,Col,Button,Image,Spinner,Table}from'react-bootstrap';import{useEffect,useState,useContext}from'react';import{fetchOneProduct,fetchProdRating}from'../http/catalogAPI.js';import{useParams}from'react-router-dom';import{append}from'../http/basketAPI.js';import{AppContext}from'../components/AppContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=function Product(){var _useParams=useParams(),id=_useParams.id;var _useContext=useContext(AppContext),basket=_useContext.basket;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];useEffect(function(){fetchOneProduct(id).then(function(data){return setProduct(data);});fetchProdRating(id).then(function(data){return setRating(data);});},[id]);var handleClick=function handleClick(productId){append(productId).then(function(data){basket.products=data.products;});};if(!product){return/*#__PURE__*/_jsx(Spinner,{animation:\"border\"});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mt-3 mb-3\",children:[/*#__PURE__*/_jsx(Col,{lg:4,children:product.image?/*#__PURE__*/_jsx(Image,{width:300,height:300,src:'/'+product.image}):/*#__PURE__*/_jsx(Image,{width:300,height:300,src:\"http://via.placeholder.com/300\"})}),/*#__PURE__*/_jsxs(Col,{lg:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsxs(\"h3\",{children:[product.price,\".00 \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0411\\u0440\\u0435\\u043D\\u0434: \",product.brand.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F: \",product.category.name]}),/*#__PURE__*/_jsx(\"div\",{children:rating?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433: \",rating.rating,\", \\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432 \",rating.votes]}):/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleClick(product.id);},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]}),!!product.props.length&&/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"}),/*#__PURE__*/_jsx(Table,{bordered:true,hover:true,size:\"sm\",children:/*#__PURE__*/_jsx(\"tbody\",{children:product.props.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.value})]},item.id);})})})]})})]});};export default Product;","map":{"version":3,"sources":["/var/www/html/check/javascript-shop/client.v1/src/pages/Product.js"],"names":["Container","Row","Col","Button","Image","Spinner","Table","useEffect","useState","useContext","fetchOneProduct","fetchProdRating","useParams","append","AppContext","Product","id","basket","product","setProduct","rating","setRating","then","data","handleClick","productId","products","image","name","price","brand","category","votes","props","length","map","item","value"],"mappings":"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","sourcesContent":["import { Container, Row, Col, Button, Image, Spinner, Table } from 'react-bootstrap'\nimport { useEffect, useState, useContext } from 'react'\nimport { fetchOneProduct, fetchProdRating } from '../http/catalogAPI.js'\nimport { useParams } from 'react-router-dom'\nimport { append } from '../http/basketAPI.js'\nimport { AppContext } from '../components/AppContext.js'\n\nconst Product = () => {\n    const { id } = useParams()\n    const { basket } = useContext(AppContext)\n    const [product, setProduct] = useState(null)\n    const [rating, setRating] = useState(null)\n\n    useEffect(() => {\n        fetchOneProduct(id).then(data => setProduct(data))\n        fetchProdRating(id).then(data => setRating(data))\n    }, [id])\n\n    const handleClick = (productId) => {\n        append(productId).then(data => {\n            basket.products = data.products\n        })\n    }\n\n    if (!product) {\n        return <Spinner animation=\"border\" />\n    }\n\n    return (\n        <Container>\n            <Row className=\"mt-3 mb-3\">\n                <Col lg={4}>\n                    {product.image ? (\n                        <Image width={300} height={300} src={'/' + product.image} />\n                    ) : (\n                        <Image width={300} height={300} src=\"http://via.placeholder.com/300\" />\n                    )}\n                </Col>\n                <Col lg={8}>\n                    <h1>{product.name}</h1>\n                    <h3>{product.price}.00 руб.</h3>\n                    <p>Бренд: {product.brand.name}</p>\n                    <p>Категория: {product.category.name}</p>\n                    <div>\n                        {rating ? (\n                            <p>Рейтинг: {rating.rating}, голосов {rating.votes}</p>\n                        ) : (\n                            <Spinner animation=\"border\" />\n                        )}\n                    </div>\n                    <Button onClick={() => handleClick(product.id)}>Добавить в корзину</Button>\n                </Col>\n            </Row>\n            {!!product.props.length &&\n                <Row>\n                    <Col>\n                        <h3>Характеристики</h3>\n                            <Table bordered hover size=\"sm\">\n                                <tbody>\n                                    {product.props.map(item => \n                                        <tr key={item.id}>\n                                            <td>{item.name}</td>\n                                            <td>{item.value}</td>\n                                        </tr>\n                                    )}\n                                </tbody>\n                            </Table>\n                    </Col>\n                </Row>\n            }\n        </Container>\n    )\n}\n\nexport default Product"]},"metadata":{},"sourceType":"module"}